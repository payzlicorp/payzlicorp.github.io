import{u as G,r as e,B,R as H,a as P,b as V}from"./vendor.452aba66.js";const O=function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}};O();const z="/",M="/deployments",$=()=>{const d="project",p="tag",[l,o]=G(),[t,r]=e.exports.useState(null),[a,u]=e.exports.useState(null),[x,v]=e.exports.useState(null),[f,y]=e.exports.useState(null),[F,b]=e.exports.useState(null),[R,S]=e.exports.useState(null),[A,g]=e.exports.useState(null);return e.exports.useEffect(()=>{(async function(){var I;if(t){var i=l.get(d);if(u(i),g(null),i){var m=t.filter(n=>n.Tag==i)[0].Title;if(v(m),i!=(f==null?void 0:f.ProjectTag)){var s=await fetch("/notes/"+i+"/registry.json").then(n=>n.json());s.ProjectTag=i;var T=[],j={};for(var k of s.Releases){var L=parseInt(k.GitTag.match(/[0-9]+/)[0]);T.push(L),j[L]=k}s.Releases=T.sort((n,_)=>_-n).reduce((n,_)=>(n.push(j[_]),n),[]),y(s)}}else v(null),y(null);if(a){var h=l.get(p),E=null;if(s!=null||(s=f),((I=s==null?void 0:s.Releases)==null?void 0:I.length)&&(h?E=s.Releases.filter(n=>n.GitTag==h)[0]:(E=s.Releases[0],h=E.GitTag)),S(E==null?void 0:E.Version),b(h),h){var C=await fetch("/notes/"+i+"/"+h+".html").then(n=>n.text());g(C)}else g(null)}else S(null),g(null),b(null)}else{var c=await fetch("/notes/projects.json").then(n=>n.json());r(c)}})()},[l,t,a,F]),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("div",{id:"panel_top"},!!t&&e.exports.createElement("ul",null,t.map(c=>e.exports.createElement("li",{key:c.Tag},e.exports.createElement("a",{href:"#",onClick:i=>{i.preventDefault();var m={};m[d]=c.Tag,v(null),o(m)}},c.Title))))),!!x&&!!f&&!!R&&e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("table",null,e.exports.createElement("tbody",null,e.exports.createElement("tr",null,e.exports.createElement("td",{style:{verticalAlign:"top",width:"10em"}},e.exports.createElement("ul",null,f.Releases.map(c=>e.exports.createElement("li",{key:c.GitTag},e.exports.createElement("a",{href:"#",onClick:i=>{i.preventDefault();var m={};m[d]=a,m[p]=c.GitTag,o(m)}},c.Version))))),e.exports.createElement("td",{style:{verticalAlign:"top"}},e.exports.createElement("h1",null,x+" v"+R),e.exports.createElement("div",{dangerouslySetInnerHTML:{__html:A}})))))))},q=()=>{const[d,p]=e.exports.useState(null);return e.exports.useEffect(()=>{(async function(){var l=await fetch("https://payzlicorp.github.io/deployments/list.json"),o=await l.json(),t=[],r=null,a=null;for(var u of o){u.id_project!=r&&(t.push({id_project:u.id_project,project:u.project,github_relpath:u.github_repository_url.match(/:([^\/]+\/[^\/]+$)/)[1].replace(/\.git$/,""),environments:[]}),r=u.id_project,a=null);var x=t[t.length-1];u.id_environment!=a&&(x.environments.push({id_environment:u.id_environment,buildables:[]}),a=u.id_environment);var v=x.environments[x.environments.length-1];v.buildables.push(u)}p(t)})()},[]),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("h1",null,"Payzli Product Deployments"),e.exports.createElement("div",{id:"panel_top"},!!d&&d.map(l=>e.exports.createElement(e.exports.Fragment,{key:l.id_project},e.exports.createElement("h2",null,l.project),l.environments.map(o=>e.exports.createElement(e.exports.Fragment,{key:o.id_environment},e.exports.createElement("h3",null,o.id_environment),e.exports.createElement("table",{className:"env_t"},e.exports.createElement("thead",null,e.exports.createElement("tr",null,e.exports.createElement("td",null,"Component"),e.exports.createElement("td",null,"Release"),e.exports.createElement("td",null,"Commit"),e.exports.createElement("td",null,"Date/Time"),e.exports.createElement("td",null,"Action"))),e.exports.createElement("tbody",null,o.buildables.map(t=>{var r;return e.exports.createElement("tr",{key:t.id_buildable},e.exports.createElement("td",null,t.buildable),e.exports.createElement("td",null,t.release_tag?t.version_text+(t.is_at_release?"":"+"):""),e.exports.createElement("td",null,(r=t.git_commit_hash)==null?void 0:r.substring(0,7)),e.exports.createElement("td",null,t.dt_inserted?t.dt_inserted.substring(0,19)+" UTC":""),e.exports.createElement("td",null,!!t.github_run_id&&!!l.github_relpath?e.exports.createElement("a",{href:"https://github.com/"+l.github_relpath+"/actions/runs/"+t.github_run_id},"link"):""))})))))))))};const K=()=>e.exports.createElement("div",{id:"center_column"},e.exports.createElement(B,null,e.exports.createElement(H,null,e.exports.createElement(P,{path:z,element:e.exports.createElement($,null)}),e.exports.createElement(P,{path:M,element:e.exports.createElement(q,null)}))));async function U(){V.exports.render(e.exports.createElement(K,null),document.getElementById("app"))}U();

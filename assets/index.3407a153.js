import{u as P,r as e,a as G,B}from"./vendor.40866eca.js";const H=function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}};H();const V=()=>{const c="project",m="tag",[l,o]=P(),[t,r]=e.exports.useState(null),[a,i]=e.exports.useState(null),[x,E]=e.exports.useState(null),[f,y]=e.exports.useState(null),[R,b]=e.exports.useState(null),[S,T]=e.exports.useState(null),[A,g]=e.exports.useState(null);return e.exports.useEffect(()=>{(async function(){var F;if(t){var u=l.get(c);if(i(u),g(null),u){var d=t.filter(n=>n.Tag==u)[0].Title;if(E(d),u!=(f==null?void 0:f.ProjectTag)){var s=await fetch("/notes/"+u+"/registry.json").then(n=>n.json());s.ProjectTag=u;var j=[],k={};for(var L of s.Releases){var I=parseInt(L.GitTag.match(/[0-9]+/)[0]);j.push(I),k[I]=L}s.Releases=j.sort((n,_)=>_-n).reduce((n,_)=>(n.push(k[_]),n),[]),y(s)}}else E(null),y(null);if(a){var h=l.get(m),v=null;if(s!=null||(s=f),((F=s==null?void 0:s.Releases)==null?void 0:F.length)&&(h?v=s.Releases.filter(n=>n.GitTag==h)[0]:(v=s.Releases[0],h=v.GitTag)),T(v==null?void 0:v.Version),b(h),h){var C=await fetch("/notes/"+u+"/"+h+".html").then(n=>n.text());g(C)}else g(null)}else T(null),g(null),b(null)}else{var p=await fetch("/notes/projects.json").then(n=>n.json());r(p)}})()},[l,t,a,R]),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("div",{id:"panel_top"},!!t&&e.exports.createElement("ul",null,t.map(p=>e.exports.createElement("li",{key:p.Tag},e.exports.createElement("a",{href:"#",onClick:u=>{u.preventDefault();var d={};d[c]=p.Tag,E(null),o(d)}},p.Title))))),!!x&&!!f&&!!S&&e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("table",null,e.exports.createElement("tbody",null,e.exports.createElement("tr",null,e.exports.createElement("td",{style:{verticalAlign:"top",width:"10em"}},e.exports.createElement("ul",null,f.Releases.map(p=>e.exports.createElement("li",{key:p.GitTag},e.exports.createElement("a",{href:"#",onClick:u=>{u.preventDefault();var d={};d[c]=a,d[m]=p.GitTag,o(d)}},p.Version))))),e.exports.createElement("td",{style:{verticalAlign:"top"}},e.exports.createElement("h1",null,x+" v"+S),e.exports.createElement("div",{dangerouslySetInnerHTML:{__html:A}})))))))},O=()=>{const[c,m]=e.exports.useState(null);return e.exports.useEffect(()=>{(async function(){var l=await fetch("https://payzlicorp.github.io/deployments/list.json"),o=await l.json(),t=[],r=null,a=null;for(var i of o){i.id_project!=r&&(t.push({id_project:i.id_project,project:i.project,github_relpath:i.github_repository_url.match(/:([^\/]+\/[^\/]+$)/)[1].replace(/\.git$/,""),environments:[]}),r=i.id_project,a=null);var x=t[t.length-1];i.id_environment!=a&&(x.environments.push({id_environment:i.id_environment,buildables:[]}),a=i.id_environment);var E=x.environments[x.environments.length-1];E.buildables.push(i)}m(t)})()},[]),e.exports.createElement(e.exports.Fragment,null,e.exports.createElement("h1",null,"Payzli Product Deployments"),e.exports.createElement("div",{id:"panel_top"},!!c&&c.map(l=>e.exports.createElement(e.exports.Fragment,{key:l.id_project},e.exports.createElement("h2",null,l.project),l.environments.map(o=>e.exports.createElement(e.exports.Fragment,{key:o.id_environment},e.exports.createElement("h3",null,o.id_environment),e.exports.createElement("table",{className:"env_t"},e.exports.createElement("thead",null,e.exports.createElement("tr",null,e.exports.createElement("td",null,"Component"),e.exports.createElement("td",null,"Release"),e.exports.createElement("td",null,"Commit"),e.exports.createElement("td",null,"Date/Time"),e.exports.createElement("td",null,"Action"))),e.exports.createElement("tbody",null,o.buildables.map(t=>{var r;return e.exports.createElement("tr",{key:t.id_buildable},e.exports.createElement("td",null,t.buildable),e.exports.createElement("td",null,t.release_tag?t.version_text+(t.is_at_release?"":"+"):""),e.exports.createElement("td",null,(r=t.git_commit_hash)==null?void 0:r.substring(0,7)),e.exports.createElement("td",null,t.dt_inserted?t.dt_inserted.substring(0,19)+" UTC":""),e.exports.createElement("td",null,!!t.github_run_id&&!!l.github_relpath?e.exports.createElement("a",{href:"https://github.com/"+l.github_relpath+"/actions/runs/"+t.github_run_id},"link"):""))})))))))))};const z=()=>{const[c]=P();return e.exports.createElement("div",{id:"center_column"},c.get("deployments")!=null?e.exports.createElement(O,null):e.exports.createElement(V,null))};async function M(){G.exports.render(e.exports.createElement(B,null,e.exports.createElement(z,null)),document.getElementById("app"))}M();
